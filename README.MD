# ðŸš€ IoT Monitoring System

## ðŸ“‚ Project Structure

### ðŸ“ Layers

- Controller Layer: Handles HTTP requests and responses.
- Service Layer: Contains business logic.
- Repository Layer: Communicates with the database.
- Mapper Layer: Transforms entities to DTOs and vice versa.
- Entity Layer: Represents database models.

```bash
ðŸ—‚ï¸ Key Directories

src/
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ java/com/capt/capteurs
â”‚   â”‚   â”œâ”€â”€ controller/       # Controllers for each feature
â”‚   â”‚   â”œâ”€â”€ service/          # Business logic
â”‚   â”‚   â”œâ”€â”€ repository/       # MongoDB repositories
â”‚   â”‚   â”œâ”€â”€ model/            # Entities
â”‚   â”‚   â”œâ”€â”€ dto/              # Request and Response DTOs
â”‚   â”‚   â””â”€â”€ mapper/           # Mapping logic
â”‚   â””â”€â”€ resources/
â”‚       â”œâ”€â”€ application.yml   # Configuration file
â”‚       â””â”€â”€ static/           # Static resources
â””â”€â”€ test/
    â”œâ”€â”€ java/com/capt/capteurs # Unit and integration tests
```

## ðŸ—ƒï¸ Main Entities

#### Device

- Attributes: name, type (e.g., temperature, humidity), status (ACTIVE/INACTIVE), lastCommunication

- Relations: Belongs to a Zone, has multiple Measurements and Alerts.

#### Measurement

- Attributes: timestamp, value

#### Alert

- Attributes: severity (NORMAL, LOW, MEDIUM, HIGH, CRITICAL), message, timestamp

#### Zone

- Attributes: name, type, location

- Relations: Contains multiple Devices.

#### User & Role

##### User Attributes: login, password, active, roles

##### Role Attributes: name, level

### ðŸ”— Relationships

- A Zone can contain multiple Devices.

- A Device can have multiple Measurements and Alerts.

### ðŸ”¥ Device Types and Alert Thresholds

##### Temperature Sensors

- Severity

- Range

- Message
```bash
CRITICAL

> 40Â°C or < -10Â°C

"Risque immÃ©diat pour les Ã©quipements."
```
```bash
HIGH

35-40Â°C or -5Â°C to -10Â°C

"Action rapide nÃ©cessaire."
```
```bash
MEDIUM

30-35Â°C or 0Â°C to -5Â°C

"Situation Ã  surveiller."
```
```bash
LOW

25-30Â°C

"LÃ©gÃ¨re dÃ©viation."
```
```bash
NORMAL

20-25Â°C

"Plage optimale."
```
##### Humidity Sensors

- Severity

- Range

- Message

```bash
CRITICAL

> 90% or < 20%

"Risque de dommages matÃ©riels."
```
```bash
HIGH

80-90% or 20-30%

"Conditions dÃ©favorables."
```
```bash
MEDIUM

70-80% or 30-40%

"Situation Ã  surveiller."
```
```bash
LOW

65-70% or 40-45%

"LÃ©gÃ¨re dÃ©viation."
```
```bash
NORMAL

45-65%

"Plage optimale."
```
### ðŸŒŸ Features

- Device Management
- List devices with pagination (/api/user/devices/**)
- Add a device (Admin only) (/api/admin/devices/**)
- Zone Management
- View zones (/api/user/zones/**)
- Add a zone (Admin only) (/api/admin/zones/**) 
- Measurement Management
- View measurements (/api/user/measurements/**)
- Add a measurement (/api/user/measurements/**)
- Export measurements (/api/admin/measurements/export)
- Alert Management
- View alerts (/api/user/alerts/**)
- User Management
- Authentication (/api/auth/login)
- Register new users (/api/auth/register)
- Manage roles (Admin only) (/api/admin/users/{id}/roles)

### ðŸ”’ Security

- Stateless authentication with JWT.
- Role-based access control:
```bash 
/api/admin/* requires ADMIN role.
```
```bash
/api/user/* requires USER role.
``` 
- Password encryption with BCryptPasswordEncoder.

### ðŸ³ Docker

Dockerfile for containerization.

Build and push Docker images to DockerHub via Jenkins.

### ðŸ› ï¸ Quality Assurance

SonarLint: Local code quality checks.

Spring Actuator: Monitoring and health checks.

GitHub Actions:

Unit tests.

Syntax validation.

Dependency vulnerability scans.

Style and conventions.

Compilation checks.

Jenkins Pipeline:

Builds Docker images.

Deploys images.

### ðŸ“¦ Technologies

Framework: Spring Boot

Database: MongoDB

API Style: RESTful

Validation: Bean Validation

Exception Handling: @ControllerAdvice

Monitoring: Spring Actuator